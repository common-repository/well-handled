(function(){new Vue({el:"#vue-settings",data:window.whData,methods:{clearStatuses:function(){this.forms.settings.saved=!1,this.forms.settings.errors={},this.forms.prune&&(this.forms.prune.saved=!1,this.forms.prune.errors={}),this.forms.send&&(this.forms.send.saved=!1,this.forms.send.errors={})},settingsSubmit:function(){var e=this;this.clearStatuses(),this.forms.settings.loading=!0,this.formAjax(this.forms.settings,function(s){e.forms.settings.loading=!1,s.ok&&s.data?(e.forEach(s.data,function(r,t){e.forms.settings[t]=r}),e.forms.settings.saved=!0):s.errors?e.forms.settings.errors=s.errors:e.forms.settings.errors.other="The server garbled the last response. :(",e.scrollTo()})},sendSubmit:function(){var e=this;this.clearStatuses(),this.forms.send.loading=!0,this.formAjax(this.forms.send,function(s){e.forms.send.loading=!1,s.ok?e.forms.send.saved=!0:s.errors?e.forms.send.errors=s.errors:e.forms.send.errors.other="The server garbled the last response. :(",e.scrollTo()})},pruneSubmit:function(e){var s=this;this.clearStatuses(),this.forms.prune.loading=!0,this.forms.prune.mode=e,this.forms.prune.age=parseInt(this.prune[e],10)||0,this.formAjax(this.forms.prune,function(r){s.forms.prune.loading=!1,r.ok&&r.data?(s.forms.prune.saved=!0,s.hasContent=r.data):r.errors?s.forms.prune.errors=r.errors:s.forms.prune.errors.other="The server garbled the last response. :(",s.scrollTo()})},getQueue:function(){var e=this;this.queue&&this.formAjax(this.forms.queue,function(s){s.ok&&s.data?e.queue=s.data.queue:e.queue={total:0,due:0,next:""}})}},mounted:function(){this.queue&&(setInterval(this.getQueue(),3e4),this.getQueue())}})})();
