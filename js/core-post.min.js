(function(){var i=new Vue({el:"#wpbody",data:window.wh_app_data,methods:{changeTheme:function(){var e=this;Vue.nextTick(function(){e.editor.setOption("theme",e.forms.theme.theme)})},saveTheme:function(){this.formAjax(this.forms.theme,function(){return!0})},getPreview:function(){var e=this,o='<html style="background-color: #f1f1f1; padding: 20px; "><body style="background-color: #fff; color: #444; text-align: center; font-size: 1rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; max-width: 700px; box-shadow: 0 1px 3px rgba(0,0,0,0.13);"><div style="padding: 20px;">&hellip; Loading &hellip;</div></body></html>',t=document.getElementById("wh-modal--template");t.contentWindow.contents=o,t.src="javascript:window.contents",this.formAjax(this.forms.preview,function(n){n.data&&n.data.preview&&(t.contentWindow.contents=n.data.preview,t.src="javascript:window.contents"),n.data&&n.data.json&&(e.forms.preview.data=n.data.json)})},showModal:function(){this.forms.preview.email=!1,this.modal=!0;var e=this;Vue.nextTick(function(){e.getPreview()})}},editor:null,mounted:function(){var e=this;const o=document.getElementById("wh-code");o&&(this.editor=CodeMirror.fromTextArea(o,{lineNumbers:!0,matchBrackets:!0,indentWithTabs:!0,indentUnit:4,lineWrapping:!0,mode:{name:"handlebars",base:"text/html"},theme:e.forms.theme.theme}),this.editor.on("change",function(t){e.forms.preview.template=t.getValue()}))}});document.addEventListener("keyup",function(e){e=e||window.event,("key"in e&&(e.key==="Escape"||e.key==="Esc")||e.keyCode===27)&&(i.modal=!1)})})();
